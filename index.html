<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Speedometer with Engine Sound</title>
<style>
    body {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
        font-family: Arial, sans-serif;
        background: #111;
        color: white;
        user-select: none;
    }

    .speedometer {
        width: 250px;
        height: 250px;
        border: 10px solid #444;
        border-radius: 50%;
        position: relative;
    }

    .needle {
        width: 4px;
        height: 110px;
        background: red;
        position: absolute;
        bottom: 50%;
        left: 50%;
        transform-origin: bottom;
        transform: rotate(-120deg);
        transition: transform 0.1s linear;
    }

    .center {
        width: 15px;
        height: 15px;
        background: white;
        border-radius: 50%;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    .btn {
        margin-top: 30px;
        padding: 15px 40px;
        font-size: 18px;
        border: none;
        border-radius: 10px;
        background: green;
        color: white;
    }
</style>
</head>
<body>

<h1>Speedometer</h1>

<div class="speedometer">
    <div class="needle" id="needle"></div>
    <div class="center"></div>
</div>

<h2>Speed: <span id="speed">0</span> km/h</h2>

<button class="btn"
    ontouchstart="startAccelerate()"
    ontouchend="stopAccelerate()"
    onmousedown="startAccelerate()"
    onmouseup="stopAccelerate()"
>
Press & Hold
</button>

<script>
    let speed = 0;
    let accelerateInterval = null;
    let brakeInterval = null;

    // ðŸ”Š Audio variables
    let audioCtx = null;
    let oscillator = null;
    let gainNode = null;

    function startEngineSound() {
        if (audioCtx) return;

        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        oscillator = audioCtx.createOscillator();
        gainNode = audioCtx.createGain();

        oscillator.type = "sawtooth"; // engine-like sound
        oscillator.frequency.value = 100;

        gainNode.gain.value = 0.1;

        oscillator.connect(gainNode);
        gainNode.connect(audioCtx.destination);
        oscillator.start();
    }

    function stopEngineSound() {
        if (oscillator) {
            oscillator.stop();
            oscillator = null;
            audioCtx = null;
        }
    }

    function updateEngineSound() {
        if (oscillator) {
            oscillator.frequency.value = 100 + speed * 4;
        }
    }

    function startAccelerate() {
        clearInterval(brakeInterval);
        startEngineSound();

        if (accelerateInterval) return;

        accelerateInterval = setInterval(() => {
            if (speed < 190) {
                speed += 2;
                updateSpeedometer();
                updateEngineSound();
            }
        }, 50);
    }

    function stopAccelerate() {
        clearInterval(accelerateInterval);
        accelerateInterval = null;

        stopEngineSound();

        brakeInterval = setInterval(() => {
            if (speed > 0) {
                speed -= 1;
                updateSpeedometer();
            } else {
                clearInterval(brakeInterval);
            }
        }, 30);
    }

    function updateSpeedometer() {
        document.getElementById("speed").innerText = speed;
        let rotation = (speed / 180) * 240 - 120;
        document.getElementById("needle").style.transform =
            "rotate(" + rotation + "deg)";
    }
</script>

</body>
</html>
